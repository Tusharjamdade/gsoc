<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Avro File Analysis â€” GSoC 2025 End Evaluation</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Poppins:wght@600;700&display=swap"
    rel="stylesheet">
  <style>
    /* =====================
     Variables & Base
     ===================== */
    :root {
      --bg: linear-gradient(180deg, #f6fbff 0%, #ffffff 100%);
      --card: rgba(255, 255, 255, 0.75);
      --muted: #6b7280;
      --text: #0f172a;
      --accent1: #6d28d9;
      --accent2: #06b6d4;
      --glass-border: rgba(255, 255, 255, 0.6);
      --shadow: 0 12px 25px rgba(0, 0, 0, 0.08);
      --radius: 16px;
      --glass-blur: 12px;
    }

    [data-theme="dark"] {
      --bg: linear-gradient(180deg, #071025 0%, #071229 60%);
      --card: rgba(10, 13, 20, 0.65);
      --muted: #9aa4b2;
      --text: #e6eef7;
      --accent1: #7c3aed;
      --accent2: #06b6d4;
      --glass-border: rgba(255, 255, 255, 0.08);
      --shadow: 0 14px 40px rgba(2, 6, 23, 0.7);
      --glass-blur: 8px;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
      scroll-behavior: smooth;
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: var(--bg);
      color: var(--text);
    }

    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      transition: background .35s ease, color .35s ease;
    }

    /* =====================
     Header
     ===================== */
    header.site-header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      backdrop-filter: blur(10px) saturate(120%);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.4));
      border-bottom: 1px solid var(--glass-border);
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 18px;
      flex-wrap: wrap;
      transition: background 0.3s ease, padding 0.3s ease;
      border-radius: 0 0 20px 20px;
    }

    [data-theme="dark"] header.site-header {
      background: linear-gradient(180deg, rgba(7, 10, 21, 0.6), rgba(7, 10, 21, 0.3));
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex: 1;
      min-width: 0;
    }

    .logo-img {
      width: 2.5rem;
      height: 2.5rem;
      object-fit: contain;
      border-radius: 8px;
      transition: transform .2s ease;
    }

    .logo-img:hover {
      transform: scale(1.05);
    }

    .brand h1 {
      font-size: 1.05rem;
      line-height: 1.2;
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .brand p {
      font-size: 0.75rem;
      margin: 0;
      color: var(--muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-left: auto;
    }

    .theme-toggle {
      background: var(--card);
      border: 1px solid var(--glass-border);
      padding: 6px;
      border-radius: 50%;
      cursor: pointer;
      display: inline-grid;
      place-items: center;
      width: 36px;
      height: 36px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      transition: transform .18s ease, background .18s ease, box-shadow .18s ease;
    }

    .theme-toggle:active {
      transform: scale(.95);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .theme-toggle svg {
      width: 18px;
      height: 18px;
      stroke: var(--text);
    }

    /* =====================
     Layout (Sidebar + Main)
     ===================== */
    .container {
      max-width: 1200px;
      margin: 100px auto 28px;
      padding: 0 16px;
      flex: 1 0 auto;
      display: grid;
      grid-template-columns: 260px 1fr;
      gap: 24px;
    }

    aside.sidebar {
      position: sticky;
      top: 110px;
      height: max-content;
      border-right: 2px solid rgba(255, 255, 255, 0.12);
      padding-right: 1rem;
      font-size: 15px;
      backdrop-filter: blur(6px);
    }

    .sidebar nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .sidebar nav a {
      color: var(--text);
      text-decoration: none;
      padding: 8px 10px;
      border-radius: 12px;
      transition: background .2s, transform .2s;
    }

    .sidebar nav a:hover {
      background: rgba(109, 40, 217, 0.1);
      transform: translateX(4px);
    }

    [data-theme="dark"] .sidebar nav a:hover {
      background: rgba(124, 58, 237, 0.15);
    }

    section.main {
      padding-bottom: 2rem;
    }

    /* =====================
     Cards + visuals
     ===================== */
    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(var(--glass-blur));
      margin-top: 1rem;
      overflow-x: auto;
      transition: transform .18s ease, box-shadow .18s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 18px 28px rgba(0, 0, 0, 0.12);
    }

    .chart-card img {
      border-radius: 12px;
      max-width: 100%;
      height: auto;
      display: block;
    }

    .mini-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
    }

    .mini-table td {
      padding: 10px 12px;
      border-bottom: 1px dashed rgba(0, 0, 0, 0.06);
      font-size: 14px;
    }

    [data-theme="dark"] .mini-table td {
      border-bottom: 1px dashed rgba(255, 255, 255, 0.05);
    }

    footer.site-footer {
      padding: 18px 16px;
      border-top: 1px solid var(--glass-border);
      text-align: center;
      color: var(--muted);
      font-size: 0.875rem;
      backdrop-filter: blur(6px);
    }

    /* =====================
     Responsive
     ===================== */
    @media(max-width:1024px) {
      .container {
        grid-template-columns: 220px 1fr;
        gap: 16px;
      }

      .theme-toggle {
        width: 32px;
        height: 32px;
      }
    }

    @media(max-width:768px) {
      .container {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      aside.sidebar {
        position: relative;
        top: auto;
        border-right: none;
        padding: 0;
        margin-bottom: 1rem;
      }

      header.site-header {
        padding: 8px 12px;
      }

      .theme-toggle {
        width: 28px;
        height: 28px;
      }

      .brand h1 {
        font-size: 14px;
      }

      .brand p {
        font-size: 11px;
      }
    }

    @media(max-width:480px) {
      header.site-header {
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;
        gap: 6px;
        padding: 8px 12px;
      }

      .brand {
        width: 100%;
        justify-content: flex-start;
        gap: 8px;
      }

      .brand h1 {
        font-size: 1rem;
        white-space: normal;
      }

      .brand p {
        font-size: 0.75rem;
        white-space: normal;
      }

      .logo-img {
        width: 2rem;
        height: 2rem;
      }

      .header-actions {
        width: 100%;
        display: flex;
        justify-content: flex-end;
        margin-left: 0;
      }
    }
  </style>




</head>

<body>
  <header class="site-header">
    <div class="brand">
      <!-- Smaller GSoC logo -->
      <img src="img/gsoc.png" alt="GSoC Logo" class="logo-img">
      <div>
        <h1>GSoC 2025</h1>
        <p>@ Data For The Common Good</p>
      </div>
    </div>

    <div class="header-actions">
      <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode" title="Toggle dark mode">
        <svg id="themeIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"
          stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
      </button>
    </div>
  </header>



  <main class="container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <nav>
        <ul>
          <li><a href="#details">Project Information</a></li>
          <li><a href="#overview">Overview</a></li>
          <li><a href="#workflow">Workflow</a></li>
          <li><a href="#distribution">Percentage Distribution</a></li>
          <li><a href="#survival">Survival Curves</a></li>
          <li><a href="#table1">Table 1 Analysis</a></li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <section class="main">
      <article id="details">
        <h2>Project Information</h2>
        <table class="mini-table">
          <tr>
            <td><strong>Name</strong></td>
            <td><a>Tushar Jamdade</a></td>
          </tr>
          <tr>
            <td><strong>Organization</strong></td>
            <td><a href="https://commons.cri.uchicago.edu/">Data for the Common Good (D4CG)</a></td>
          </tr>
          <tr>
            <td><strong>Mentor</strong></td>
            <td>Steve Krasinsky</td>
          </tr>
          <tr>
            <td><strong>Project Repo</strong></td>
            <td><a href="https://github.com/chicagopcdc/pcdc-analysis-notebook">pcdc-analysis-notebook</a></td>
          </tr>
          <tr>
            <td><strong>Technologies</strong></td>
            <td>R, Docker, Apache Spark, RStudio, Shiny</td>
          </tr>
          <tr>
            <td><strong>Topics</strong></td>
            <td>Visualization, Automation, Cloud, Data Analysis, AVRO</td>
          </tr>
        </table>
      </article>

      <article id="overview">
        <h2>Overview</h2>
        <h3>Dockerized R/Shiny Application for PFB AVRO Biomedical Data Analysis</h3>
        <p>
          This project provides a Dockerized RStudio-based Shiny application for analyzing biomedical datasets stored in
          AVRO files using the Portable Format for Biomedical (PFB) standard. The system leverages Apache Spark (via
          sparklyr) to efficiently read and process large-scale AVRO inputs, handling files with 40,000+ nested records,
          and flattens complex hierarchical structures into structured tabular formats for downstream analysis.
        </p>
        <p>
          Users can explore different entity types and observation nodes, generate percentage distributions, and perform
          survival analyses such as Kaplanâ€“Meier overall and event-free survival curves. A configurable
          <strong>Table-1</strong> feature allows selection of covariates, specification of variable types, and
          inclusion/exclusion of variables, while also supporting statistical p-value computation when grouping is
          applied.
        </p>
        <p>
          Grouping can be performed by uploading subject ID files (CSV, Excel, or text). Two groups are then created:
          one matching the IDs and the other comprising the remaining subjects. If no grouping file is provided, Table-1
          is generated for the full dataset. The application further allows iterative re-grouping, clearing of results,
          and re-analysis with new inputs. Outputs including summary tables (Excel) and visualizations (PNG) can be
          downloaded directly for reporting.
        </p>
        <p>
          Encapsulation within Docker ensures reproducibility, consistency, and portability across environments, while
          integration with Apache Spark enables scalable processing of large biomedical datasets. Additionally, the
          application can be deployed on AWS (EC2, ECS, or Fargate) to provide secure, scalable, and remote access for
          research teams.
        </p>
      </article>

      <article id="workflow">
        <h2>Workflow</h2>
        <p>
          From the UI, users upload the AVRO file in the PFB (Portable Format for Biomedical data). If the file is
          valid, all entities are displayed. Core entities such as <em>person, subject, timing,
            survival_characteristics</em> are automatically included for survival analyses. Optionally, users can
          include custom entities. Data is merged with relationships preserved, enabling downstream operations.
        </p>
      </article>

      <article id="distribution">
        <h2>Percentage Distribution</h2>
        <p>
          Users can select categorical variables to compute percentage distributions, gaining quick insights. Results
          are exportable as Excel or PNG files.
        </p>
        <div class="chart-card card"><img src="img/image1.png" alt="Percentage Distribution Example" width="100%">
        </div>
      </article>

      <article id="survival">
        <h2>Survival Curves</h2>
        <h3>Overall Survival</h3>
        <p>
          Calculated using initial diagnosis dates and last-known survival status from
          <code>survival_characteristics</code>. The Kaplanâ€“Meier estimator is used to plot survival rates.
        </p>
        <div class="chart-card card"><img src="img/image2.png" alt="Overall Survival Curve" width="100%"></div>

        <h3>Event-Free Survival</h3>
        <p>
          Event-free survival is computed using censoring information from <code>subject + timing</code>. If a patient
          is censored, the curve reflects the drop accordingly.
        </p>
        <div class="chart-card card"><img src="img/image3.png" alt="Event-Free Survival Curve" width="100%"></div>
      </article>

      <article id="table1">
        <h2>Table-1 Analysis</h2>
        <p>
          Users can select covariates, specify variable types, and generate summary tables. Numeric variables include
          mean, median, and missing percentages, while categorical variables show counts and percentages. Results are
          interactive: rows per page can be adjusted, and search functionality is supported.
        </p>
        <div class="chart-card card"><img src="img/image4.png" alt="Table 1 Output Example" width="100%"></div>
        <div class="chart-card card"><img src="img/image5.png" alt="Interactive Table Example" width="100%"></div>
        <p>
          Grouping is enabled by uploading subject IDs. IDs in the file form <strong>Group 1</strong>, while remaining
          subjects form <strong>Group 2</strong>. P-values are computed for statistical comparisons. Users can clear
          results, re-upload new IDs, and repeat analyses. Final outputs can be downloaded as Excel files.
        </p>
        <div class="chart-card card"><img src="img/image6.png" alt="Grouped Table 1 Example" width="100%"></div>
      </article>
    </section>
  </main>

  <footer class="site-footer">
    <div>Made for GSoC â€¢ Avro File Analysis â€¢ Visual Summary â€¢ &copy; 2025</div>
  </footer>

  <script>
    // Keep dark theme only
    (function () {
      const root = document.documentElement;
      const toggle = document.getElementById('themeToggle');
      const icon = document.getElementById('themeIcon');
      let theme = 'dark';
      root.setAttribute('data-theme', theme);

      function updateIcon(t) {
        icon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>'; // moon icon
      }
      updateIcon(theme);

      toggle.addEventListener('click', () => {
        theme = (theme === 'dark') ? 'light' : 'dark';
        root.setAttribute('data-theme', theme);
        updateIcon(theme);
      });
    })();
  </script>
</body>

</html>